{"version":3,"file":"lieu.umd.js","sources":["../src/core/helpers.js","../src/core/const.js","../src/lieu.js"],"sourcesContent":["class Helpers {\n    // Checks if passed object is object or not\n    static isObject(obj) {\n        return typeof obj === 'object';\n    }\n\n    // Checks if passed object is funcion or not\n    static isFunction(func) {\n        return typeof func === 'function';\n    }\n\n    // Returns parsed from JSON object or null\n    static fromJson(obj) {\n        try {\n            const languagesFromJson = JSON.parse(obj);\n\n            if (this.isObject(languagesFromJson)) {\n                return languagesFromJson;\n            } else {\n                return null;\n            }\n        } catch {\n            return null;\n        }\n    }\n\n    // Return browser language\n    static getBrowserLang() {\n        return navigator.language.slice(0, 2);\n    }\n\n    // Check key existing in object\n    static hasKey(key, obj) {\n        return Object.keys(obj).indexOf(key) !== -1;\n    }\n\n    // Split string by delimiter, returns array<String>\n    static findAllSubstrings(string) {\n        const regexp = /\\|[[{\\d+]/g;\n        const subStrings = [];\n\n        function findDelimiter(str) {\n            const delimiterIndex = str.search(regexp);\n\n            if (delimiterIndex !== -1) {\n                subStrings.push(str.substring(0, delimiterIndex));\n                findDelimiter(str.substring(delimiterIndex + 1));\n            } else {\n                subStrings.push(str);\n            }\n        }\n\n        findDelimiter(string);\n\n        return subStrings;\n    }\n\n    /**\n     * Returns pluralized string depending on passed @param count\n     * @param string<String>\n     * @param count<Number>\n     */\n    static pluralizeString(string, count) {\n        // [num,num] {num,num} [num] {num} [num,*] {num,*}\n        const regex = /[[{]\\d+,{0,1}\\d{0,}\\*{0,1}[\\]}]/g;\n        const subStrings = this.findAllSubstrings(string);\n\n        let locale;\n\n        for (let i = 0; i < subStrings.length; i++) {\n            const subString = subStrings[i];\n            const result = subString.match(regex);\n\n            if (result) {\n                // Set default value for the first time\n                if (!locale) {\n                    locale = subString.replace(regex, '');\n                    continue;\n                }\n\n                const resultNumbers = [];\n\n                // Remove array/obj brackets and split string by comma\n                resultNumbers.push(\n                    ...result[0].replace(/[[{]|[\\]}]/g, '').split(',')\n                );\n\n                // Check if matched plural count more or equal passed count\n                if (resultNumbers.length >= 2) {\n                    if (resultNumbers[1] === '*' && count >= resultNumbers[0]) {\n                        locale = subString.replace(regex, '');\n\n                        break;\n                    } else if (\n                        resultNumbers[0] <= count &&\n                        resultNumbers[1] >= count\n                    ) {\n                        locale = subString.replace(regex, '');\n\n                        break;\n                    }\n                } else {\n                    if (resultNumbers[0] === count) {\n                        locale = subString.replace(regex, '');\n\n                        break;\n                    }\n                }\n            }\n        }\n\n        return locale;\n    }\n}\n\nexport default Helpers;\n","const STORAGE_KEY = 'lieu';\nconst ATTRIBUTE_NAME = 'data-lieu';\nconst PLURAL = 'plural';\n\nexport { STORAGE_KEY, ATTRIBUTE_NAME, PLURAL };\n","import Helpers from './core/helpers';\nimport {\n    STORAGE_KEY,\n    ATTRIBUTE_NAME,\n    PLURAL\n} from './core/const';\n\n/**\n * @param initialData<Object>\n */\nexport default class Lieu {\n    #isDebug = false; // boolean\n    #initialData = null; // object\n    #languages = null; // object\n    #currentLanguage = null; // object\n    #attributeName; // string\n\n    #onSetLang = (newLang, oldLang) => {};\n    #onGetLang = () => {};\n\n    constructor(initialData) {\n        this.#initialData = initialData;\n\n        this.#isDebug = initialData.isDebug;\n\n        this.#init();\n    }\n\n    #init() {\n        this.#initLanguages();\n        this.#setAttributeName();\n        this.#setInitialLanguage();\n        this.#setHooks();\n    }\n\n    // Set class field languages if languages from initial data is object or json\n    #initLanguages() {\n        let initialLanguages = this.#initialData.languages;\n\n        if (!Helpers.isObject(initialLanguages)) {\n            initialLanguages = Helpers.fromJson(initialLanguages);\n        }\n\n        this.#languages = initialLanguages;\n    }\n\n    // Set hooks if they exist in initial data\n    #setHooks() {\n        if (Helpers.isFunction(this.#initialData.onSetLang)) {\n            this.#onSetLang = this.#initialData.onSetLang;\n        }\n\n        if (Helpers.isFunction(this.#initialData.onGetLang)) {\n            this.#onGetLang = this.#initialData.onGetLang;\n        }\n    }\n\n    // Set custom data attribute\n    #setAttributeName() {\n        this.#attributeName = this.#initialData.attributeName ?? ATTRIBUTE_NAME;\n    }\n\n    // Set initial language from languages\n    #setInitialLanguage() {\n        const userKeyLang =\n            localStorage.getItem(STORAGE_KEY) ?? // from storage\n            this.#initialData.initialLanguage ?? // from options\n            Helpers.getBrowserLang(); // from navigator\n\n        if (Helpers.hasKey(userKeyLang, this.#languages)) {\n            this.setLang(userKeyLang);\n        } else {\n            this.setLang(Object.keys(this.#languages)[0]);\n        }\n    }\n\n    /*\n     * Set new lang by string key from languages class field\n     * @param langKey<String>\n     */\n    setLang(langKey) {\n        const newLanguage = this.#languages[langKey];\n        const oldLanguage = this.#currentLanguage;\n\n        if (!Helpers.hasKey(langKey, this.#languages)) {\n            console.error(\n                `Lieu | Language key \"${langKey}\" not found in languages!`\n            );\n\n            return;\n        }\n\n        this.#currentLanguage = newLanguage;\n        localStorage.setItem(STORAGE_KEY, langKey);\n\n        this.#localizeDomElems();\n\n        this.#onSetLang(oldLanguage, newLanguage);\n    }\n\n    // Find all data-attributes by attributeName field in DOM, and localize them\n    #localizeDomElems() {\n        const $locales = Array.from(\n            document.querySelectorAll(`[${this.#attributeName}]`)\n        );\n\n        $locales.forEach(($str) => {\n            const localeAttributes = $str.getAttributeNames();\n            let localeKey;\n            let pluralNum;\n            const interpolationObj = {};\n\n            localeAttributes.forEach((attr) => {\n                // If data-lieu-... attribute (or custom)\n                if (attr.includes(this.#attributeName.toLowerCase())) {\n                    const attributeValue = $str.getAttribute(attr);\n\n                    // Set locale key, plural number and interpolation properties\n                    if (attr === this.#attributeName) {\n                        localeKey = attributeValue;\n                    } else if (\n                        attr.includes(PLURAL) &&\n                        !isNaN(attributeValue)\n                    ) {\n                        pluralNum = Number(attributeValue);\n                    } else {\n                        const objKey = attr.replace(\n                            `${this.#attributeName.toLowerCase()}-`,\n                            ''\n                        );\n\n                        interpolationObj[objKey] = attributeValue;\n                    }\n                }\n            });\n\n            $str.innerHTML = this.trans(localeKey, interpolationObj, pluralNum);\n        });\n    }\n\n    /**\n     * Return value from currentLanguage.locales or null\n     * @param localeKey<String>\n     * @param arg1<String|Object> not required\n     * @param arg2<String|Object> not required\n     */\n    trans(localeKey, arg1, arg2) {\n        const { locales } = this.#currentLanguage;\n        const options = [arg1, arg2];\n\n        let locale = locales[localeKey];\n        let interpolationObj;\n        let pluralNum;\n\n        if (Helpers.isObject(options[0])) {\n            interpolationObj = options[0];\n            pluralNum = options[1];\n        } else {\n            interpolationObj = options[1];\n            pluralNum = options[0];\n        }\n\n        if (!locale) {\n            locale = localeKey;\n\n            if (this.#isDebug) {\n                console.warn(\n                    `Lieu | Locale key \"${localeKey}\" not found in current language!`\n                );\n            }\n        }\n\n        if (interpolationObj) {\n            locale = locale.replace(\n                /%\\{(.*?)\\}/g,\n                (match, key) => interpolationObj[key] || match\n            );\n        }\n\n        if (pluralNum) {\n            locale = Helpers.pluralizeString(locale, pluralNum);\n        }\n\n        return locale;\n    }\n\n    /** Return language object from languages class field by its' key\n     * or current langauge if @param langKey is not set\n     @param langKey<String> not required\n     */\n    getLang(langKey) {\n        this.#onGetLang();\n\n        if (!langKey) {\n            return this.#currentLanguage;\n        }\n\n        if (!Helpers.hasKey(langKey, this.#languages)) {\n            console.error(\n                `Lieu | Language key \"${langKey}\" not found in languages!`\n            );\n\n            return;\n        }\n\n        return this.#languages[langKey];\n    }\n\n    // Returns object of all languages\n    getLangs() {\n        return this.#languages;\n    }\n}\n"],"names":["Helpers","isObject","obj","isFunction","func","fromJson","languagesFromJson","JSON","parse","getBrowserLang","navigator","language","slice","hasKey","key","Object","keys","indexOf","findAllSubstrings","string","regexp","subStrings","findDelimiter","str","delimiterIndex","search","push","substring","pluralizeString","count","regex","locale","i","length","subString","result","match","replace","resultNumbers","split","STORAGE_KEY","ATTRIBUTE_NAME","PLURAL","Lieu","newLang","oldLang","constructor","initialData","isDebug","initialLanguages","languages","onSetLang","onGetLang","attributeName","userKeyLang","localStorage","getItem","initialLanguage","setLang","langKey","newLanguage","oldLanguage","console","error","setItem","$locales","Array","from","document","querySelectorAll","forEach","$str","localeAttributes","getAttributeNames","localeKey","pluralNum","interpolationObj","attr","includes","toLowerCase","attributeValue","getAttribute","isNaN","Number","objKey","innerHTML","trans","arg1","arg2","locales","options","warn","getLang","getLangs"],"mappings":"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"}